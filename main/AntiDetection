local cloneref = cloneref or clonereference or function(instance)
    return instance
end
local cf = cloneref or clonereference or function(instance : any)
    return instance
end
local CoreGui : CoreGui = cf(game:GetService("CoreGui"))
local Players : Players = cf(game:GetService("Players"))

local ProtectedFolder = Instance.new("Folder")
ProtectedFolder.Parent = CoreGui
ProtectedFolder.Name = "C̶a̴n̸c̸e̶l̷S̶u̶b̶s̷c̵r̶i̶p̶t̷i̵o̵n̴A̸p̸p̴"

local ProtectedGUI = gethui or gethiddenui or get_hidden_ui or get_hui or get_h_ui

local AntiDetectionLibrary = {}

function AntiDetectionLibrary:Protect(Instance)
    if Instance and Instance:IsA("GuiObject") then
        Instance.Parent = ProtectedGUI or cloneref(ProtectedFolder)
    else
        Instance.Parent = cloneref(ProtectedFolder)
    end
end

function AntiDetectionLibrary:GetProtectedFolder()
    return ProtectedFolder 
end

function AntiDetectionLibrary:BypassAntiCheat()
-- // Dan FFA Anti-Detection made by nikoleto scripts \\ --
if tostring(game.GameId) == "7381526759" then
for i,v in Players.LocalPlayer.Character:GetDescendants() do
    if v:IsA("LocalScript") then
        if v.Name ~= "Animate" and v.Name ~= "Revolver" then
            v:Destroy()
        end
    end
end

Players.LocalPlayer.Character.DescendantAdded:Connect(function(Descendant)
    if Descendant:IsA("LocalScript") then
        if Descendant.Name ~= "Animate" and Descendant.Name ~= "Revolver" then
            Descendant:Destroy()
        end
    end
end)
end
-- // Adonis Anti-Detection made by ??? (Modified by nikoleto scripts) \\ --
local setthreadidentity = setthreadidentity or set_thread_identity or setidentity or function() return end
local hookfunction = hookfunction or hook_function or function() return end
local getgc = getgc or get_gc or function() return game:GetDescendants() end
local getinfo = getinfo or debug.getinfo
local Hooked = {}
local Detected, Kill
setthreadidentity(2)
for i, v in getgc(true) do
    if typeof(v) == "table" then
        local DetectFunc = rawget(v, "Detected")
        local KillFunc = rawget(v, "Kill")
        if DetectFunc and KillFunc then
        if typeof(DetectFunc) == "function" and not Detected then
            Detected = DetectFunc
            local Old; Old = hookfunction(Detected, function(Action, Info, NoCrash)
                if Action ~= "_" then
                        warn(`Adonis AntiCheat flagged\nMethod: {Action}\nInfo: {Info}`)
                end
                
                return true
            end)
            table.insert(Hooked, Detected)
        end

        if rawget(v, "Variables") and rawget(v, "Process") and typeof(KillFunc) == "function" and not Kill then
            Kill = KillFunc
            local Old; Old = hookfunction(Kill, function(Info)
                    warn(`Adonis AntiCheat tried to kill (fallback): {Info}`)
            end)
            table.insert(Hooked, Kill)
        end
    end
    end
end

local Old; Old = hookfunction(getrenv().debug.info, newcclosure(function(...)
    local LevelOrFunc, Info = ...

    if Detected and LevelOrFunc == Detected then
            warn(`Adonis AntiCheat sanity check detected and broken`)
        return coroutine.yield(coroutine.running())
    end
    
    return Old(...)
end))
setthreadidentity(7)
end

return AntiDetectionLibrary
